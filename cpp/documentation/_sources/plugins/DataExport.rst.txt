.. _cppDataExportPage:

Data Export (*BETA*)
####################

The Data Export plugin allows the user to export data to a *CSV*, *TXT*, or *RINEX*. 
The plugin can handle data from either previously logged binary files or data directly from a VectorNav unit.
Additionally, it can handle outputting to multiple different formats at once.

.. warning::
	This plugin is currently in *BETA* and may be subject to interface changes in the future.

Usage
=====

There are two examples for the Data Export plugin. 
One will show how to export the data from a previously logged file and the other will step through the process to log the data directly from the sensor.

Exporting from a File
^^^^^^^^^^^^^^^^^^^^^

When logging the data from a file, a :class:`~VN::DataExport::Exporter` object must be created to which a sensor object must subscribe to.

.. literalinclude:: ../../examples/DataExport/FromFile/main.cpp
   :language: c++
   :start-at: DataExport::ExporterAscii asciiExporter
   :end-at: sensor.subscribeToMessage(asciiExporter.getQueuePtr(), "VN");
   :dedent: 4

Each of the following exporter types can be obtained from the 
:class:`~VN::DataExport::Exporter` class.

* :class:`~VN::DataExport::ExporterAscii` - export to a *TXT* file
* :class:`~VN::DataExport::ExporterCsv` - export to a *CSV* file
* :class:`~VN::DataExport::ExporterRinex` - export to a *RINEX* file

The example can be run with either a hardcoded input file path or as a command-line executable.
If using the command line the argument will be the input file path:

.. code-block:: console
    
    .\DataExportFromFile.exe "DataExportFromFile.bin"

Exporting in Real-Time
^^^^^^^^^^^^^^^^^^^^^^

When using the Data Export plugin with the sensor, a :class:`~VN::Sensor` object and an object for the export file type first needs to be created. 
For this example, the :class:`~VN::DataExport::ExporterCsv` class is used.

.. literalinclude:: ../../examples/DataExport/FromSensor/main.cpp
   :language: c++
   :start-at: DataExport::ExporterCsv csvExporter(outputDirectory);
   :end-at: DataExport::ExporterCsv csvExporter(outputDirectory);
   :dedent: 4

Once the initialization is complete, the sensor needs to suscribe to the certain message types wanted. In the below example, first the VectorNav FA binary packets are suscribed to and then the VectorNav ASCII messages.

.. literalinclude:: ../../examples/DataExport/FromSensor/main.cpp
   :language: c++
   :start-at: latestError = sensor.subscribeToMessage(csvExporter.getQueuePtr(), Sensor::BinaryOutputMeasurements{}, Sensor::FaSubscriberFilterType::AnyMatch);
   :end-at: latestError = sensor.subscribeToMessage(csvExporter.getQueuePtr(), Sensor::BinaryOutputMeasurements{}, Sensor::FaSubscriberFilterType::AnyMatch);
   :dedent: 4

.. literalinclude:: ../../examples/DataExport/FromSensor/main.cpp
   :language: c++
   :start-at: latestError = sensor.subscribeToMessage(csvExporter.getQueuePtr(), "VN", Sensor::AsciiSubscriberFilterType::StartsWith);
   :end-at: latestError = sensor.subscribeToMessage(csvExporter.getQueuePtr(), "VN", Sensor::AsciiSubscriberFilterType::StartsWith);
   :dedent: 4

..  note::
    Please note that when using the ``Exporter`` classes with the sensor, the exporter must be started and stopped manually.

API
===

:ref:`DataExport<namespace_VN__DataExport>`
