

<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Key Functionality &#8212; VectorNav SDK 0.22.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/cloud.css?v=36acb9b5" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=a6d58504" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noticia+Text:400,i,b,bi|Open+Sans:400,i,b,bi|Roboto+Mono:400,i,b,bi&amp;display=swap" type="text/css" />
    
    <script src="../_static/documentation_options.js?v=5686f5df"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/tabs.js?v=3ee01567"></script>

    
    
     
        <script src="../_static/jquery.cookie.js"></script>
    

    
     
        <script src="../_static/cloud.base.js"></script>
    

    
     
        <script src="../_static/cloud.js"></script>
    

    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Advanced Functionality" href="advanced_functionality.html" />
    <link rel="prev" title="Getting Started" href="getting_started.html" /> 
        <meta name="viewport" content="width=device-width, initial-scale=1">
  </head><body>
    <div class="relbar-top">
        
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="advanced_functionality.html" title="Advanced Functionality"
             accesskey="N">next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="getting_started.html" title="Getting Started"
             accesskey="P">previous</a> &nbsp; &nbsp;</li>
    <li><a href="../Documentation.html">VectorNav SDK 0.22.0 documentation</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">Key Functionality</a></li> 
      </ul>
    </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="key-functionality">
<h1>Key Functionality<a class="headerlink" href="#key-functionality" title="Link to this heading">¶</a></h1>
<section id="establishing-communication">
<h2>Establishing Communication<a class="headerlink" href="#establishing-communication" title="Link to this heading">¶</a></h2>
<section id="connecting-to-the-sensor">
<h3>Connecting to the Sensor<a class="headerlink" href="#connecting-to-the-sensor" title="Link to this heading">¶</a></h3>
<p>It is first necessary to initialize a <a class="reference internal" href="../api/sensor_api.html#vectornav.Sensor" title="vectornav.Sensor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sensor</span></code></a> object, using which we will send commands to the VectorNav unit.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">vectornav</span><span class="w"> </span><span class="kn">import</span> <span class="n">Sensor</span><span class="p">,</span> <span class="n">Registers</span>
<span class="n">sensor</span> <span class="o">=</span> <span class="n">Sensor</span><span class="p">()</span>
</pre></div>
</div>
<p>We can then connect to the VectorNav unit using the <a class="reference internal" href="../api/sensor_api.html#vectornav.Sensor.autoConnect" title="vectornav.Sensor.autoConnect"><code class="xref py py-func docutils literal notranslate"><span class="pre">autoConnect()</span></code></a> method</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sensor</span><span class="o">.</span><span class="n">autoConnect</span><span class="p">(</span><span class="n">portName</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If the baud rate is known then the <a class="reference internal" href="../api/sensor_api.html#vectornav.Sensor.connect" title="vectornav.Sensor.connect"><code class="xref py py-func docutils literal notranslate"><span class="pre">connect()</span></code></a> method can be used, which accepts an extra parameter of the expected baud rate.
This is a quicker call, as it does not require scanning all the baud rates.
However, this method does not perform any verification of connectivity, so it is necessary to call <a class="reference internal" href="../api/sensor_api.html#vectornav.Sensor.verifySensorConnectivity" title="vectornav.Sensor.verifySensorConnectivity"><code class="xref py py-func docutils literal notranslate"><span class="pre">verifySensorConnectivity()</span></code></a> to ensure communication.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sensor</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;COM1&quot;</span><span class="p">,</span> <span class="n">Sensor</span><span class="o">.</span><span class="n">BaudRate</span><span class="o">.</span><span class="n">Baud115200</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">sensor</span><span class="o">.</span><span class="n">verifySensorConnectivity</span><span class="p">():</span>
    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Wrong baud rate or incorrect port&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If the <a class="reference internal" href="../api/sensor_api.html#vectornav.Sensor.autoConnect" title="vectornav.Sensor.autoConnect"><code class="xref py py-func docutils literal notranslate"><span class="pre">autoConnect()</span></code></a> method is used, no <a class="reference internal" href="../api/sensor_api.html#vectornav.Sensor.autoConnect" title="vectornav.Sensor.autoConnect"><code class="xref py py-func docutils literal notranslate"><span class="pre">autoConnect()</span></code></a> method call is necessary, as it verifies connectivity through the auto connection process at each baud rate. It is therefore the slower of the two methods, by default requiring a maximum of 4.5 seconds.</p>
<p>To maintain robustness while utilizing the speed of the <a class="reference internal" href="../api/sensor_api.html#vectornav.Sensor.connect" title="vectornav.Sensor.connect"><code class="xref py py-func docutils literal notranslate"><span class="pre">connect()</span></code></a> method, the <a class="reference internal" href="../api/sensor_api.html#vectornav.Sensor.autoConnect" title="vectornav.Sensor.autoConnect"><code class="xref py py-func docutils literal notranslate"><span class="pre">autoConnect()</span></code></a> method can be used as a fallback if <a class="reference internal" href="../api/sensor_api.html#vectornav.Sensor.verifySensorConnectivity" title="vectornav.Sensor.verifySensorConnectivity"><code class="xref py py-func docutils literal notranslate"><span class="pre">verifySensorConnectivity()</span></code></a> fails.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sensor</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;COM1&quot;</span><span class="p">,</span> <span class="n">Sensor</span><span class="o">.</span><span class="n">BaudRate</span><span class="o">.</span><span class="n">Baud115200</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">sensor</span><span class="o">.</span><span class="n">verifySensorConnectivity</span><span class="p">():</span>
    <span class="n">sensor</span><span class="o">.</span><span class="n">autoConnect</span><span class="p">(</span><span class="s2">&quot;COM1&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="changing-the-baud-rate">
<h3>Changing the Baud Rate<a class="headerlink" href="#changing-the-baud-rate" title="Link to this heading">¶</a></h3>
<p>Once communication has been established, the baud rate can be reconfigured at any point using the <a class="reference internal" href="../api/sensor_api.html#vectornav.Sensor.changeBaudRate" title="vectornav.Sensor.changeBaudRate"><code class="xref py py-func docutils literal notranslate"><span class="pre">changeBaudRate()</span></code></a> method.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Change baud rate on the active serial port</span>
<span class="n">sensor</span><span class="o">.</span><span class="n">changeBaudRate</span><span class="p">(</span><span class="n">Sensor</span><span class="o">.</span><span class="n">BaudRate</span><span class="o">.</span><span class="n">Baud921600</span><span class="p">)</span>
<span class="c1"># Change baud rate on a specific serial port</span>
<span class="n">sensor</span><span class="o">.</span><span class="n">changeBaudRate</span><span class="p">(</span><span class="n">Sensor</span><span class="o">.</span><span class="n">BaudRate</span><span class="o">.</span><span class="n">Baud921600</span><span class="p">,</span> <span class="n">Registers</span><span class="o">.</span><span class="n">BaudRate</span><span class="o">.</span><span class="n">SerialPort</span><span class="o">.</span><span class="n">Serial1</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a class="reference internal" href="../api/sensor_api.html#vectornav.Sensor.changeBaudRate" title="vectornav.Sensor.changeBaudRate"><code class="xref py py-func docutils literal notranslate"><span class="pre">changeBaudRate()</span></code></a> method will send a command to the unit to reconfigure its baud rate on the specified serial port. If the targeted port is the currently active one, it will update the host’s baud rate to match.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To ensure the baud rate change persists over a unit power cycle, a <a class="reference internal" href="../api/sensor_api.html#vectornav.Sensor.writeSettings" title="vectornav.Sensor.writeSettings"><code class="xref py py-func docutils literal notranslate"><span class="pre">writeSettings()</span></code></a> command should be sent.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sensor</span><span class="o">.</span><span class="n">writeSettings</span><span class="p">()</span>
</pre></div>
</div>
</div>
</section>
<section id="disconnecting-from-the-sensor">
<h3>Disconnecting From the Sensor<a class="headerlink" href="#disconnecting-from-the-sensor" title="Link to this heading">¶</a></h3>
<p>To disconnect from the unit, the <a class="reference internal" href="../api/sensor_api.html#vectornav.Sensor.disconnect" title="vectornav.Sensor.disconnect"><code class="xref py py-func docutils literal notranslate"><span class="pre">disconnect()</span></code></a> method can be called.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sensor</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
<section id="accessing-registers">
<h2>Accessing Registers<a class="headerlink" href="#accessing-registers" title="Link to this heading">¶</a></h2>
<p>All configuration settings and many measurements are stored in one of 256 registers, which are accessible via synchronous polling and synchronous writing.
Each of these registers are their own class with the fields for each register being public members of that class.
All of the register classes exist in <a class="reference internal" href="../api/registers.html#registers"><span class="std std-ref">Registers</span></a> and a submodule for the register group.
For example, the <code class="docutils literal notranslate"><span class="pre">SynchronizationControl</span></code> class can be accessed as <a class="reference internal" href="../api/registers.html#vectornav.Registers.System.SyncControl" title="vectornav.Registers.System.SyncControl"><code class="xref py py-class docutils literal notranslate"><span class="pre">SyncControl</span></code></a>.</p>
<p>Both measurement registers and configuration registers can be read, whereas only configuration registers can be written. This is accomplished best using the <a class="reference internal" href="../api/sensor_api.html#vectornav.Sensor.readRegister" title="vectornav.Sensor.readRegister"><code class="xref py py-func docutils literal notranslate"><span class="pre">readRegister()</span></code></a> and <a class="reference internal" href="../api/sensor_api.html#vectornav.Sensor.writeRegister" title="vectornav.Sensor.writeRegister"><code class="xref py py-func docutils literal notranslate"><span class="pre">writeRegister()</span></code></a> methods, which are discussed in the following sections.</p>
<p>The fields in each <code class="xref py py-class docutils literal notranslate"><span class="pre">Register</span></code> object will match the fields listed in the latest ICD, which can be downloaded directly from VectorNav’s website.</p>
<section id="reading-registers">
<h3>Reading Registers<a class="headerlink" href="#reading-registers" title="Link to this heading">¶</a></h3>
<p>As discussed in <a class="reference internal" href="#accessing-registers"><span class="std std-ref">Accessing Registers</span></a>, the <a class="reference internal" href="../api/sensor_api.html#vectornav.Sensor.readRegister" title="vectornav.Sensor.readRegister"><code class="xref py py-func docutils literal notranslate"><span class="pre">readRegister()</span></code></a> method is the preferred method to read registers. To do so, you must:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Create a <code class="xref py py-class docutils literal notranslate"><span class="pre">MeasurementRegister</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigurationRegister</span></code> object to be populated by the received response</p></li>
<li><p>Call the <a class="reference internal" href="../api/sensor_api.html#vectornav.Sensor.readRegister" title="vectornav.Sensor.readRegister"><code class="xref py py-func docutils literal notranslate"><span class="pre">readRegister()</span></code></a> method</p></li>
<li><p>Access the received values in the original <code class="xref py py-class docutils literal notranslate"><span class="pre">MeasurementRegister</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigurationRegister</span></code> object</p></li>
</ol>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">modelRegister</span> <span class="o">=</span> <span class="n">Registers</span><span class="o">.</span><span class="n">System</span><span class="o">.</span><span class="n">Model</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">sensor</span><span class="o">.</span><span class="n">readRegister</span><span class="p">(</span><span class="n">modelRegister</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">latestError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="n">latestError</span><span class="si">}</span><span class="s2"> encountered when reading register 1 (Model).</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sensor Model Number: </span><span class="si">{</span><span class="n">modelRegister</span><span class="o">.</span><span class="n">model</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="writing-registers">
<h3>Writing Registers<a class="headerlink" href="#writing-registers" title="Link to this heading">¶</a></h3>
<p>As discussed in <a class="reference internal" href="#accessing-registers"><span class="std std-ref">Accessing Registers</span></a>, the <a class="reference internal" href="../api/sensor_api.html#vectornav.Sensor.writeRegister" title="vectornav.Sensor.writeRegister"><code class="xref py py-func docutils literal notranslate"><span class="pre">writeRegister()</span></code></a> method is the preferred method to write to a register.
Each <code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigurationRegister</span></code> object uses optional fields with no default values. These fields must be populated before the
<code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigurationRegister</span></code> object is used to write to the sensor. This can be done by ensuring all fields contain valid values rather than  <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>To write to a sensor, you must:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Create a <code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigurationRegister</span></code> object</p></li>
<li><p>Populate the <code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigurationRegister</span></code> object with the desired values to configure the unit</p></li>
<li><p>Call the <a class="reference internal" href="../api/sensor_api.html#vectornav.Sensor.writeRegister" title="vectornav.Sensor.writeRegister"><code class="xref py py-func docutils literal notranslate"><span class="pre">writeRegister()</span></code></a> method</p></li>
</ol>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">asyncDataOutputType</span> <span class="o">=</span> <span class="n">Registers</span><span class="o">.</span><span class="n">System</span><span class="o">.</span><span class="n">AsyncOutputType</span><span class="p">()</span>
<span class="n">asyncDataOutputType</span><span class="o">.</span><span class="n">ador</span> <span class="o">=</span> <span class="n">Registers</span><span class="o">.</span><span class="n">System</span><span class="o">.</span><span class="n">AsyncOutputType</span><span class="o">.</span><span class="n">Ador</span><span class="o">.</span><span class="n">YPR</span>
<span class="n">asyncDataOutputType</span><span class="o">.</span><span class="n">serialPort</span> <span class="o">=</span> <span class="n">Registers</span><span class="o">.</span><span class="n">System</span><span class="o">.</span><span class="n">AsyncOutputType</span><span class="o">.</span><span class="n">SerialPort</span><span class="o">.</span><span class="n">Serial1</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">sensor</span><span class="o">.</span><span class="n">writeRegister</span><span class="p">(</span><span class="n">asyncDataOutputType</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">latestError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="n">latestError</span><span class="si">}</span><span class="s2"> encountered when writing register 6 (AsyncOutputType).</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ADOR Configured&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To ensure register values are not unintentionally changed, it is reccomended to first read a register, change only the desired parameter, and write the register back to the unit. This can be accomplished as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">reg</span> <span class="o">=</span> <span class="n">Registers</span><span class="o">.</span><span class="n">System</span><span class="o">.</span><span class="n">SyncControl</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">sensor</span><span class="o">.</span><span class="n">readRegister</span><span class="p">(</span><span class="n">reg</span><span class="p">)</span>
    <span class="n">reg</span><span class="o">.</span><span class="n">syncOutMode</span> <span class="o">=</span> <span class="n">Registers</span><span class="o">.</span><span class="n">System</span><span class="o">.</span><span class="n">SyncControl</span><span class="o">.</span><span class="n">SyncOutMode</span><span class="o">.</span><span class="n">ImuStart</span>
    <span class="n">reg</span><span class="o">.</span><span class="n">syncOutSkipFactor</span> <span class="o">=</span> <span class="mi">8</span>
    <span class="n">sensor</span><span class="o">.</span><span class="n">writeRegister</span><span class="p">(</span><span class="n">reg</span><span class="p">)</span>
<span class="k">except</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="n">latestError</span><span class="si">}</span><span class="s2"> encountered when reading and writing SyncControl register</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="reading-measurements">
<h2>Reading Measurements<a class="headerlink" href="#reading-measurements" title="Link to this heading">¶</a></h2>
<p>By default, all asynchronous measurements (except <code class="xref py py-attr docutils literal notranslate"><span class="pre">gnssSatInfo</span></code> and <code class="xref py py-attr docutils literal notranslate"><span class="pre">gnssRawMeas</span></code>), whether sourced from ASCII or binary outputs, are made available as a <a class="reference internal" href="../api/composite_data_api.html#vectornav.CompositeData" title="vectornav.CompositeData"><code class="xref py py-class docutils literal notranslate"><span class="pre">CompositeData</span></code></a> object on the <code class="docutils literal notranslate"><span class="pre">MeasurementQueue</span></code> contained within the <a class="reference internal" href="../api/sensor_api.html#vectornav.Sensor" title="vectornav.Sensor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sensor</span></code></a> object once the packet is parsed.</p>
<section id="the-composite-data-object">
<h3>The Composite Data Object<a class="headerlink" href="#the-composite-data-object" title="Link to this heading">¶</a></h3>
<p>A <a class="reference internal" href="../api/composite_data_api.html#vectornav.CompositeData" title="vectornav.CompositeData"><code class="xref py py-class docutils literal notranslate"><span class="pre">CompositeData</span></code></a> object contains each measurement group (e.g. <a class="reference internal" href="../api/composite_data_api.html#vectornav.CompositeData.attitude" title="vectornav.CompositeData.attitude"><code class="xref py py-attr docutils literal notranslate"><span class="pre">attitude</span></code></a>), each of which is a structure containing each measurement type (e.g. <code class="xref py py-attr docutils literal notranslate"><span class="pre">Ypr</span></code>).
Exactly one <a class="reference internal" href="../api/composite_data_api.html#vectornav.CompositeData" title="vectornav.CompositeData"><code class="xref py py-class docutils literal notranslate"><span class="pre">CompositeData</span></code></a> object is populated for each measurement message, each of which contain a subset of the possible measurement types.
Because a measurement message likely does not contain each enabled measurement, the measurements that do not have values in the message will hold a value of <cite>None</cite>.
As an example, <code class="docutils literal notranslate"><span class="pre">accel</span></code> is documented in the ICD in the <code class="docutils literal notranslate"><span class="pre">Imu</span></code> measurement group and can be accessed in a <a class="reference internal" href="../api/composite_data_api.html#vectornav.CompositeData" title="vectornav.CompositeData"><code class="xref py py-class docutils literal notranslate"><span class="pre">CompositeData</span></code></a> object as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">accel</span> <span class="o">=</span> <span class="n">compositeData</span><span class="o">.</span><span class="n">imu</span><span class="o">.</span><span class="n">accel</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a class="reference internal" href="../api/composite_data_api.html#vectornav.CompositeData" title="vectornav.CompositeData"><code class="xref py py-class docutils literal notranslate"><span class="pre">CompositeData</span></code></a> class does not contain the <cite>Common</cite> group. As such, any measurement types populated via a binary measurement in the <cite>Common</cite> group will show up in the underlying group. For example, a binary message which contains <code class="xref py py-attr docutils literal notranslate"><span class="pre">Ypr</span></code> from the <cite>Common</cite> group will be populated in the <a class="reference internal" href="../api/composite_data_api.html#vectornav.CompositeData.attitude" title="vectornav.CompositeData.attitude"><code class="xref py py-attr docutils literal notranslate"><span class="pre">attitude</span></code></a> member of a <a class="reference internal" href="../api/composite_data_api.html#vectornav.CompositeData" title="vectornav.CompositeData"><code class="xref py py-class docutils literal notranslate"><span class="pre">CompositeData</span></code></a> object.</p>
</div>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>For variable length outputs <em>gnssSatInfo</em> and <em>gnssRawMeas</em>, <a class="reference internal" href="../api/composite_data_api.html#vectornav.CompositeData" title="vectornav.CompositeData"><code class="xref py py-class docutils literal notranslate"><span class="pre">CompositeData</span></code></a> stores as many entries as its internal buffer allows for those outputs (<code class="docutils literal notranslate"><span class="pre">GNSS_SAT_INFO_MAX_COUNT</span></code> or <code class="docutils literal notranslate"><span class="pre">GNSS_RAW_MEAS_MAX_COUNT</span></code> respectively). These packets contain a count field (<cite>numSats</cite> or <cite>numMeas</cite> respectively) with the number of valid measurements output by the sensor for that packet.  If the count field value exceeds the storage capacity, the buffer will be filled, but the <cite>numSats</cite> field will remain unchanged from the value output by the sensor. To iterate through valid measurements without exceeding array bounds, users should never exceed the minimum of the count field and the internal buffer size (eg. <code class="docutils literal notranslate"><span class="pre">min(numSats,GNSS_SAT_INFO_MAX_COUNT)</span></code>).</p>
</div>
</section>
<section id="how-to-read-a-measurement">
<h3>How to Read a Measurement<a class="headerlink" href="#how-to-read-a-measurement" title="Link to this heading">¶</a></h3>
<p>Reading a measurement from the unit can be done using the following steps.</p>
<ol class="arabic simple">
<li><p>Get a <a class="reference internal" href="../api/composite_data_api.html#vectornav.CompositeData" title="vectornav.CompositeData"><code class="xref py py-class docutils literal notranslate"><span class="pre">CompositeData</span></code></a> object using the <a class="reference internal" href="../api/sensor_api.html#vectornav.Sensor.getNextMeasurement" title="vectornav.Sensor.getNextMeasurement"><code class="xref py py-func docutils literal notranslate"><span class="pre">getNextMeasurement()</span></code></a> or <a class="reference internal" href="../api/sensor_api.html#vectornav.Sensor.getMostRecentMeasurement" title="vectornav.Sensor.getMostRecentMeasurement"><code class="xref py py-func docutils literal notranslate"><span class="pre">getMostRecentMeasurement()</span></code></a> methods.</p></li>
<li><p>Validate that the <a class="reference internal" href="../api/composite_data_api.html#vectornav.CompositeData" title="vectornav.CompositeData"><code class="xref py py-class docutils literal notranslate"><span class="pre">CompositeData</span></code></a> object is not <cite>None</cite>.</p></li>
<li><p>Validate the measurement you want is in the <a class="reference internal" href="../api/composite_data_api.html#vectornav.CompositeData" title="vectornav.CompositeData"><code class="xref py py-class docutils literal notranslate"><span class="pre">CompositeData</span></code></a> object. This can be done by using the <a class="reference internal" href="../api/composite_data_api.html#vectornav.CompositeData.matchesMessage" title="vectornav.CompositeData.matchesMessage"><code class="xref py py-func docutils literal notranslate"><span class="pre">matchesMessage()</span></code></a> method. Alternatively, you could check that each individual measurement is not <cite>None</cite>.</p></li>
<li><p>Access the measurement value.</p></li>
</ol>
<p>The following code block shows and example of reading measurements from a VectorNav unit.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="k">while</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">t0</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">:</span>
    <span class="n">compositeData</span> <span class="o">=</span> <span class="n">sensor</span><span class="o">.</span><span class="n">getNextMeasurement</span><span class="p">()</span>
    <span class="c1"># Check to make sure that a measurement is available</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">compositeData</span><span class="p">:</span>
        <span class="k">continue</span>

    <span class="k">if</span> <span class="n">compositeData</span><span class="o">.</span><span class="n">matchesMessage</span><span class="p">(</span><span class="n">binaryOutput1Register</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Found binary 1 measurement.&quot;</span><span class="p">)</span>

        <span class="n">timeStartup</span> <span class="o">=</span> <span class="n">compositeData</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">timeStartup</span><span class="o">.</span><span class="n">nanoseconds</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Time: </span><span class="si">{</span><span class="n">timeStartup</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">accel</span> <span class="o">=</span> <span class="n">compositeData</span><span class="o">.</span><span class="n">imu</span><span class="o">.</span><span class="n">accel</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Accel X: </span><span class="si">{</span><span class="n">accel</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="se">\n\t</span><span class="s2">Accel Y: </span><span class="si">{</span><span class="n">accel</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="se">\n\t</span><span class="s2">Accel Z: </span><span class="si">{</span><span class="n">accel</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="sending-commands">
<h2>Sending Commands<a class="headerlink" href="#sending-commands" title="Link to this heading">¶</a></h2>
<p>Each command able to be sent to the unit is available as a public method of the <a class="reference internal" href="../api/sensor_api.html#vectornav.Sensor" title="vectornav.Sensor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sensor</span></code></a> class. They are all blocking calls; if non-blocking commands are necessary, refer to the <a class="reference internal" href="advanced_functionality.html#non-blocking-commands"><span class="std std-ref">Non-Blocking Commands</span></a> section.
To send a command, simply call the public method with the necessary parameters, if applicable. For example, to send a <a class="reference internal" href="../api/sensor_api.html#vectornav.Sensor.knownMagneticDisturbance" title="vectornav.Sensor.knownMagneticDisturbance"><code class="xref py py-func docutils literal notranslate"><span class="pre">knownMagneticDisturbance()</span></code></a> command, you can call</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sensor</span><span class="o">.</span><span class="n">knownMagneticDisturbance</span><span class="p">(</span><span class="n">KnownMagneticDisturbance</span><span class="o">.</span><span class="n">State</span><span class="o">.</span><span class="n">Present</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="logging-data">
<h2>Logging Data<a class="headerlink" href="#logging-data" title="Link to this heading">¶</a></h2>
<p>Refer to the <a class="reference internal" href="../plugins/logger.html#logger"><span class="std std-ref">Logger</span></a> documentation.</p>
</section>
<section id="error-handling">
<h2>Error Handling<a class="headerlink" href="#error-handling" title="Link to this heading">¶</a></h2>
<p>To ensure robustness in the event of an error, it is important to understand how errors are exposed to the user and the type of error handling required. Errors can be generated either synchronously—a direct result of a user call—or asynchronously—occurring independent of a user call. The VNSDK C++ library does not throw exceptions; it instead returns error codes which are propagated to the Python code and thrown natively in Python. Because of this, all exceptions can be caught as native Python exceptions.</p>
<section id="synchronous-errors">
<h3>Synchronous Errors<a class="headerlink" href="#synchronous-errors" title="Link to this heading">¶</a></h3>
<p>Synchronous errors are classified as errors that result from a function call that can raise an exception. All user-facing functions in the Sensor class will throw unless otherwise specified. This means synchronous errors will terminate the program by default unless appropriate error handling is provided. As an example, consider a connect routine is needed that will wait for a USB device to be plugged in on a specific COM port before proceeding:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Attempting to connect to </span><span class="si">{</span><span class="n">COM_PORT</span><span class="si">}</span><span class="s2"> ...&quot;</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># sleep for two seconds</span>
        <span class="n">sensor</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">COM_PORT</span><span class="p">,</span> <span class="n">Sensor</span><span class="o">.</span><span class="n">BaudRate</span><span class="o">.</span><span class="n">Baud115200</span><span class="p">)</span>
        <span class="k">break</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;connected&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Synchronous errors raised due to a non-blocking <a class="reference internal" href="../api/sensor_api.html#vectornav.Sensor.sendCommand" title="vectornav.Sensor.sendCommand"><code class="xref py py-func docutils literal notranslate"><span class="pre">sendCommand()</span></code></a> call are not returned up the stack. For an example, see <a class="reference internal" href="advanced_functionality.html#non-blocking-commands"><span class="std std-ref">Non-Blocking Commands</span></a>.
When using <a class="reference internal" href="../api/sensor_api.html#vectornav.Sensor.sendCommand" title="vectornav.Sensor.sendCommand"><code class="xref py py-func docutils literal notranslate"><span class="pre">sendCommand()</span></code></a> while blocking, errors will be returned up the stack as expected.</p>
<p>Regardless of the selected <a class="reference internal" href="../api/sensor_api.html#vectornav.Sensor.SendCommandBlockMode" title="vectornav.Sensor.SendCommandBlockMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">SendCommandBlockMode</span></code></a>, the synchronous error from the unit will be attached to the <code class="xref py py-class docutils literal notranslate"><span class="pre">GenericCommand</span></code> object and can be accessed using <code class="xref py py-func docutils literal notranslate"><span class="pre">GenericCommand.getError()</span></code>.</p>
</div>
</section>
<section id="asynchronous-errors">
<h3>Asynchronous Errors<a class="headerlink" href="#asynchronous-errors" title="Link to this heading">¶</a></h3>
<p>Asynchronous errors are classififed as errors that are not associated with a function call and can occur at any time. To handle such errors, the VNSDK provides a <a class="reference internal" href="../api/sensor_api.html#vectornav.Sensor.throwIfAsyncError" title="vectornav.Sensor.throwIfAsyncError"><code class="xref py py-func docutils literal notranslate"><span class="pre">throwIfAsyncError()</span></code></a> function, that throws an exception if an error is on the asynchronous error queue. This queue should be monitored periodically to ensure proper error handling. For example, if data has not been received in an expected period of time, checking the error queue may reveal a sensor Hard Fault which would require the sensor to be reset.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">sensor</span><span class="o">.</span><span class="n">throwIfAsyncError</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">asyncError</span><span class="p">:</span>
    <span class="c1"># Handle asynchronous error</span>
</pre></div>
</div>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<div class="sphinx-toc sphinxglobaltoc">
<h3><a href="../Documentation.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="migration_guide.html">Migration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Key Functionality</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#establishing-communication">Establishing Communication</a></li>
<li class="toctree-l2"><a class="reference internal" href="#accessing-registers">Accessing Registers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reading-measurements">Reading Measurements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sending-commands">Sending Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="#logging-data">Logging Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#error-handling">Error Handling</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="advanced_functionality.html">Advanced Functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">VNSDK API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/index.html">Plugins</a></li>
</ul>
</div>
  <div class="sphinxprev">
    <h4>Previous page</h4>
    <p class="topless"><a href="getting_started.html"
                          title="Previous page">&larr; Getting Started</a></p>
  </div>
  <div class="sphinxnext">
    <h4>Next page</h4>
    <p class="topless"><a href="advanced_functionality.html"
                          title="Next page">&rarr; Advanced Functionality</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/pages/key_functionality.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
    
    
        <div class="sidebar-toggle-group no-js">
            
            <button class="sidebar-toggle" id="sidebar-hide" title="Hide the sidebar menu">
                 «
                <span class="show-for-small">hide menu</span>
                
            </button>
            <button class="sidebar-toggle" id="sidebar-show" title="Show the sidebar menu">
                
                <span class="show-for-small">menu</span>
                <span class="hide-for-small">sidebar</span>
                 »
            </button>
        </div>
    
      <div class="clearer"></div>
    </div>
    <div class="relbar-bottom">
        
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="advanced_functionality.html" title="Advanced Functionality"
             >next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="getting_started.html" title="Getting Started"
             >previous</a> &nbsp; &nbsp;</li>
    <li><a href="../Documentation.html">VectorNav SDK 0.22.0 documentation</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">Key Functionality</a></li> 
      </ul>
    </div>
    </div>

    <div class="footer" role="contentinfo">
    &#169; Copyright 2024, VectorNav Technologies.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    </div>
    <!-- cloud_sptheme 1.4 -->
  </body>
</html>