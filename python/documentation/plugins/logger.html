

<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Logger &#8212; VectorNav SDK 0.22.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/cloud.css?v=36acb9b5" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=a6d58504" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noticia+Text:400,i,b,bi|Open+Sans:400,i,b,bi|Roboto+Mono:400,i,b,bi&amp;display=swap" type="text/css" />
    
    <script src="../_static/documentation_options.js?v=5686f5df"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/tabs.js?v=3ee01567"></script>

    
    
     
        <script src="../_static/jquery.cookie.js"></script>
    

    
     
        <script src="../_static/cloud.base.js"></script>
    

    
     
        <script src="../_static/cloud.js"></script>
    

    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Math (BETA)" href="math.html" />
    <link rel="prev" title="Firmware Programmer" href="firmware_programmer.html" /> 
        <meta name="viewport" content="width=device-width, initial-scale=1">
  </head><body>
    <div class="relbar-top">
        
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="math.html" title="Math (BETA)"
             accesskey="N">next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="firmware_programmer.html" title="Firmware Programmer"
             accesskey="P">previous</a> &nbsp; &nbsp;</li>
    <li><a href="../Documentation.html">VectorNav SDK 0.22.0 documentation</a> &#187;</li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Plugins</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Logger</a></li> 
      </ul>
    </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="logger">
<span id="pythonloggerpage"></span><h1>Logger<a class="headerlink" href="#logger" title="Link to this heading">¶</a></h1>
<p>The Logger plugin is a lightweight plugin that allows users to easily log all bytes received from a VectorNav unit to a binary file without the need to parse the packets.
This plugin can be used in conjunction with the Data Export plugin, which allows users to export the binary file that was logged into a <em>CSV</em>, <em>TXT</em>, or <em>RINEX</em> file. Information on how to export a binary file onced it has been logged with the Logger plugin can be found on the <a class="reference internal" href="data_export.html#pythondataexportpage"><span class="std std-ref">Data Export (BETA)</span></a> page.</p>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Link to this heading">¶</a></h2>
<p>As demonstrated in the Simple Logger example, to use the Logger plugin it is first necessary to import all required modules:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">vectornav</span><span class="w"> </span><span class="kn">import</span> <span class="n">ByteBuffer</span><span class="p">,</span> <span class="n">Registers</span><span class="p">,</span> <span class="n">Sensor</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">vectornav.Plugins</span><span class="w"> </span><span class="kn">import</span> <span class="n">Logger</span>
</pre></div>
</div>
<p>Next, create a <a class="reference internal" href="../api/sensor_api.html#vectornav.Sensor" title="vectornav.Sensor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sensor</span></code></a> object and connect to the VectorNav unit, such as by using the <a class="reference internal" href="../api/sensor_api.html#vectornav.Sensor.autoConnect" title="vectornav.Sensor.autoConnect"><code class="xref py py-func docutils literal notranslate"><span class="pre">autoConnect()</span></code></a> method.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sensor</span> <span class="o">=</span> <span class="n">Sensor</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">sensor</span><span class="o">.</span><span class="n">autoConnect</span><span class="p">(</span><span class="n">portName</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">latestError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="n">latestError</span><span class="si">}</span><span class="s2"> encountered when connecting to </span><span class="si">{</span><span class="n">portName</span><span class="si">}</span><span class="s2">.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Connected to </span><span class="si">{</span><span class="n">portName</span><span class="si">}</span><span class="s2"> at </span><span class="si">{</span><span class="n">sensor</span><span class="o">.</span><span class="n">connectedBaudRate</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Before data logging can begin, the resources required for logging need to be set up. The <code class="xref py py-class docutils literal notranslate"><span class="pre">Logger.SimpleLogger</span></code> object requires a <code class="xref py py-class docutils literal notranslate"><span class="pre">ByteBuffer</span></code> object as well as the path of the desired log file. The <code class="xref py py-class docutils literal notranslate"><span class="pre">ByteBuffer</span></code> object is a user-defined buffer where bytes will temporarily be stored before they are written to the log file.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">bufferToLog</span> <span class="o">=</span> <span class="n">ByteBuffer</span><span class="p">(</span><span class="mi">1024</span> <span class="o">*</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">Logger</span><span class="o">.</span><span class="n">SimpleLogger</span><span class="p">(</span><span class="n">bufferToLog</span><span class="p">,</span> <span class="n">filePath</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If the buffer overruns due to insufficient size, data will be missed. Ensure the buffer is appropriately sized based on the expected data throughput from the VectorNav unit to avoid losing any data while logging.</p>
</div>
<p>Once the <code class="xref py py-class docutils literal notranslate"><span class="pre">ByteBuffer</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">Logger.SimpleLogger</span></code> objects are instantiated, register the <code class="xref py py-class docutils literal notranslate"><span class="pre">ByteBuffer</span></code> object with the <a class="reference internal" href="../api/sensor_api.html#vectornav.Sensor" title="vectornav.Sensor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sensor</span></code></a> object as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sensor</span><span class="o">.</span><span class="n">registerReceivedByteBuffer</span><span class="p">(</span><span class="n">bufferToLog</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using the SimpleLogger class, the logger must be started and stopped manually using the <code class="xref py py-func docutils literal notranslate"><span class="pre">SimpleLogger.start()</span></code> and <code class="xref py py-func docutils literal notranslate"><span class="pre">SimpleLogger.stop()</span></code> methods.</p>
</div>
<p>To create the log file and start logging data from the VectorNav unit, call the <code class="xref py py-func docutils literal notranslate"><span class="pre">Logger.SimpleLogger.start()</span></code> method. It it important to ensure that this call is successful, otherwise the logger was not able to create the file.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">logger</span><span class="o">.</span><span class="n">start</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: Failed to write to file&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This call to start data logging spawns a separate thread dedicated to writing data to the file. This ensures that file write operations do not block the main thread, allowing it to continue processing efficiently.</p>
</div>
<p>While logging, the user should handle any asynchronous errors, such as buffer overruns, using the <a class="reference internal" href="../api/sensor_api.html#vectornav.Sensor.throwIfAsyncError" title="vectornav.Sensor.throwIfAsyncError"><code class="xref py py-func docutils literal notranslate"><span class="pre">throwIfAsyncError()</span></code></a> method. Any buffer overruns indicate that data has been dropped from the sensor during logging.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">:</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.001</span><span class="p">)</span>

    <span class="c1"># 4.1. Check for any asynchronous errors - Any buffer overruns means data has been dropped.</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">sensor</span><span class="o">.</span><span class="n">throwIfAsyncError</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">asyncError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Received async error: </span><span class="si">{</span><span class="n">asyncError</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

</pre></div>
</div>
<p>Stopping the logger is just as easy – simply call the <code class="xref py py-func docutils literal notranslate"><span class="pre">SimpleLogger.stop()</span></code> method and deregister the <code class="xref py py-class docutils literal notranslate"><span class="pre">ByteBuffer</span></code> object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">logger</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
<span class="n">sensor</span><span class="o">.</span><span class="n">deregisterReceivedByteBuffer</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Logged </span><span class="si">{</span><span class="n">logger</span><span class="o">.</span><span class="n">numBytesLogged</span><span class="p">()</span><span class="si">}</span><span class="s2"> bytes.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="api">
<h2>API<a class="headerlink" href="#api" title="Link to this heading">¶</a></h2>
<p>The Python API for the Logger plugin is modeled from the C++ API which can be found here:
<a class="reference external" href="../../../cpp/documentation/_api/namespace_VN__Logger.html#namespace-vn-logger" title="(in VectorNav SDK)"><span class="xref std std-ref">Logger</span></a></p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<div class="sphinx-toc sphinxglobaltoc">
<h3><a href="../Documentation.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../pages/migration_guide.html">Migration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/key_functionality.html">Key Functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/advanced_functionality.html">Advanced Functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">VNSDK API</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Plugins</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="calibration.html">Calibration (<em>BETA</em>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_export.html">Data Export (<em>BETA</em>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="firmware_programmer.html">Firmware Programmer</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Logger</a></li>
<li class="toctree-l2"><a class="reference internal" href="math.html">Math (<em>BETA</em>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="register_scan.html">Register Scan</a></li>
</ul>
</li>
</ul>
</div>
  <div class="sphinxprev">
    <h4>Previous page</h4>
    <p class="topless"><a href="firmware_programmer.html"
                          title="Previous page">&larr; Firmware Programmer</a></p>
  </div>
  <div class="sphinxnext">
    <h4>Next page</h4>
    <p class="topless"><a href="math.html"
                          title="Next page">&rarr; Math (<em>BETA</em>)</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/plugins/logger.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
    
    
        <div class="sidebar-toggle-group no-js">
            
            <button class="sidebar-toggle" id="sidebar-hide" title="Hide the sidebar menu">
                 «
                <span class="show-for-small">hide menu</span>
                
            </button>
            <button class="sidebar-toggle" id="sidebar-show" title="Show the sidebar menu">
                
                <span class="show-for-small">menu</span>
                <span class="hide-for-small">sidebar</span>
                 »
            </button>
        </div>
    
      <div class="clearer"></div>
    </div>
    <div class="relbar-bottom">
        
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="math.html" title="Math (BETA)"
             >next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="firmware_programmer.html" title="Firmware Programmer"
             >previous</a> &nbsp; &nbsp;</li>
    <li><a href="../Documentation.html">VectorNav SDK 0.22.0 documentation</a> &#187;</li>

          <li class="nav-item nav-item-1"><a href="index.html" >Plugins</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Logger</a></li> 
      </ul>
    </div>
    </div>

    <div class="footer" role="contentinfo">
    &#169; Copyright 2024, VectorNav Technologies.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    </div>
    <!-- cloud_sptheme 1.4 -->
  </body>
</html>